"use strict";var streamModule,Buffer=require("safer-buffer").Buffer,bomHandling=require("./bom-handling"),mergeModules=require("./helpers/merge-exports"),iconv=module.exports;iconv.encodings=null,iconv.defaultCharUnicode="ï¿½",iconv.defaultCharSingleByte="?",iconv.encode=function(e,n,o){e=""+(e||"");var c=iconv.getEncoder(n,o),r=c.write(e),i=c.end();return i&&i.length>0?Buffer.concat([r,i]):r},iconv.decode=function(e,n,o){"string"==typeof e&&(iconv.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),iconv.skipDecodeWarning=!0),e=Buffer.from(""+(e||""),"binary"));var c=iconv.getDecoder(n,o),r=c.write(e),i=c.end();return i?r+i:r},iconv.encodingExists=function(e){try{return iconv.getCodec(e),!0}catch(e){return!1}},iconv.toEncoding=iconv.encode,iconv.fromEncoding=iconv.decode,iconv._codecDataCache={__proto__:null},iconv.getCodec=function(e){if(!iconv.encodings){var n=require("../encodings");iconv.encodings={__proto__:null},mergeModules(iconv.encodings,n)}for(var o=iconv._canonicalizeEncoding(e),c={};;){var r=iconv._codecDataCache[o];if(r)return r;var i=iconv.encodings[o];switch(typeof i){case"string":o=i;break;case"object":for(var t in i)c[t]=i[t];c.encodingName||(c.encodingName=o),o=i.type;break;case"function":return c.encodingName||(c.encodingName=o),r=new i(c,iconv),iconv._codecDataCache[c.encodingName]=r,r;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+o+"')")}}},iconv._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},iconv.getEncoder=function(e,n){var o=iconv.getCodec(e),c=new o.encoder(n,o);return o.bomAware&&n&&n.addBOM&&(c=new bomHandling.PrependBOM(c,n)),c},iconv.getDecoder=function(e,n){var o=iconv.getCodec(e),c=new o.decoder(n,o);return!o.bomAware||n&&!1===n.stripBOM||(c=new bomHandling.StripBOM(c,n)),c},iconv.enableStreamingAPI=function(e){if(!iconv.supportsStreams){var n=require("./streams")(e);iconv.IconvLiteEncoderStream=n.IconvLiteEncoderStream,iconv.IconvLiteDecoderStream=n.IconvLiteDecoderStream,iconv.encodeStream=function(e,n){return new iconv.IconvLiteEncoderStream(iconv.getEncoder(e,n),n)},iconv.decodeStream=function(e,n){return new iconv.IconvLiteDecoderStream(iconv.getDecoder(e,n),n)},iconv.supportsStreams=!0}};try{streamModule=require("stream")}catch(e){}streamModule&&streamModule.Transform?iconv.enableStreamingAPI(streamModule):iconv.encodeStream=iconv.decodeStream=function(){throw new Error("iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.")};