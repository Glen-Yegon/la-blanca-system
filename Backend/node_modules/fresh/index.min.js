/*!
 * fresh
 * Copyright(c) 2012 TJ Holowaychuk
 * Copyright(c) 2016-2017 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";var CACHE_CONTROL_NO_CACHE_REGEXP=/(?:^|,)\s*?no-cache\s*?(?:,|$)/;function fresh(r,e){var t=r["if-modified-since"],a=r["if-none-match"];if(!t&&!a)return!1;var n=r["cache-control"];if(n&&CACHE_CONTROL_NO_CACHE_REGEXP.test(n))return!1;if(a){if("*"===a)return!0;var s=e.etag;if(!s)return!1;for(var i=parseTokenList(a),f=0;f<i.length;f++){var u=i[f];if(u===s||u==="W/"+s||"W/"+u===s)return!0}return!1}if(t){var o=e["last-modified"];if(!(o&&parseHttpDate(o)<=parseHttpDate(t)))return!1}return!0}function parseHttpDate(r){var e=r&&Date.parse(r);return"number"==typeof e?e:NaN}function parseTokenList(r){for(var e=0,t=[],a=0,n=0,s=r.length;n<s;n++)switch(r.charCodeAt(n)){case 32:a===e&&(a=e=n+1);break;case 44:t.push(r.substring(a,e)),a=e=n+1;break;default:e=n+1}return t.push(r.substring(a,e)),t}module.exports=fresh;