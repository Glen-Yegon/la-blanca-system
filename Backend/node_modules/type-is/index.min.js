/*!
 * type-is
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014-2015 Douglas Christopher Wilson
 * MIT Licensed
 */
"use strict";var contentType=require("content-type"),mime=require("mime-types"),typer=require("media-typer");function typeis(e,r){var t,n,i=r,o=tryNormalizeType(e);if(!o)return!1;if(i&&!Array.isArray(i))for(i=new Array(arguments.length-1),t=0;t<i.length;t++)i[t]=arguments[t+1];if(!i||!i.length)return o;for(t=0;t<i.length;t++)if(mimeMatch(normalize(n=i[t]),o))return"+"===n[0]||-1!==n.indexOf("*")?o:n;return!1}function hasbody(e){return void 0!==e.headers["transfer-encoding"]||!isNaN(e.headers["content-length"])}function typeofrequest(e,r){if(!hasbody(e))return null;var t=arguments.length>2?Array.prototype.slice.call(arguments,1):r;return typeis(e.headers["content-type"],t)}function normalize(e){if("string"!=typeof e)return!1;switch(e){case"urlencoded":return"application/x-www-form-urlencoded";case"multipart":return"multipart/*"}return"+"===e[0]?"*/*"+e:-1===e.indexOf("/")?mime.lookup(e):e}function mimeMatch(e,r){if(!1===e)return!1;var t=r.split("/"),n=e.split("/");return 2===t.length&&2===n.length&&(("*"===n[0]||n[0]===t[0])&&("*+"===n[1].slice(0,2)?n[1].length<=t[1].length+1&&n[1].slice(1)===t[1].slice(1-n[1].length):"*"===n[1]||n[1]===t[1]))}function normalizeType(e){var r=contentType.parse(e).type;return typer.test(r)?r:null}function tryNormalizeType(e){try{return e?normalizeType(e):null}catch(e){return null}}module.exports=typeofrequest,module.exports.is=typeis,module.exports.hasBody=hasbody,module.exports.normalize=normalize,module.exports.match=mimeMatch;