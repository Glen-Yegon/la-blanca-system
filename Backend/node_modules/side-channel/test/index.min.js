"use strict";var test=require("tape"),getSideChannel=require("../");test("getSideChannel",function(e){e.test("export",function(e){e.equal(typeof getSideChannel,"function","is a function"),e.equal(getSideChannel.length,0,"takes no arguments");var t=getSideChannel();e.ok(t,"is truthy"),e.equal(typeof t,"object","is an object"),e.end()}),e.test("assert",function(e){var t=getSideChannel();e.throws(function(){t.assert({})},TypeError,"nonexistent value throws");var n={};t.set(n,"data"),e.doesNotThrow(function(){t.assert(n)},"existent value noops"),e.end()}),e.test("has",function(e){var t=getSideChannel(),n=[];e.equal(t.has(n),!1,"nonexistent value yields false"),t.set(n,"foo"),e.equal(t.has(n),!0,"existent value yields true"),e.equal(t.has("abc"),!1,"non object value non existent yields false"),t.set("abc","foo"),e.equal(t.has("abc"),!0,"non object value that exists yields true"),e.end()}),e.test("get",function(e){var t=getSideChannel(),n={};e.equal(t.get(n),void 0,"nonexistent value yields undefined");var a={};t.set(n,a),e.equal(t.get(n),a,'"get" yields data set by "set"'),e.end()}),e.test("set",function(e){var t=getSideChannel(),n=function(){};e.equal(t.get(n),void 0,"value not set"),t.set(n,42),e.equal(t.get(n),42,"value was set"),t.set(n,1/0),e.equal(t.get(n),1/0,"value was set again");var a={};t.set(a,17),e.equal(t.get(n),1/0,"o is not modified"),e.equal(t.get(a),17,"o2 is set"),t.set(n,14),e.equal(t.get(n),14,"o is modified"),e.equal(t.get(a),17,"o2 is not modified"),e.end()}),e.test("delete",function(e){var t=getSideChannel(),n={};e.equal(t.delete({}),!1,"nonexistent value yields false"),t.set(n,42),e.equal(t.has(n),!0,"value is set"),e.equal(t.delete({}),!1,"nonexistent value still yields false"),e.equal(t.delete(n),!0,"deleted value yields true"),e.equal(t.has(n),!1,"value is no longer set"),e.end()}),e.end()});